DROP TABLE PUBLIC.TABLE_PERSONNAGE IF EXISTS;
DROP TABLE PUBLIC.RPG_TABLE IF EXISTS;
DROP TABLE PUBLIC.PERSONNAGE_WORK IF EXISTS;
DROP TABLE PUBLIC.PERSONNAGE IF EXISTS;
DROP TABLE PUBLIC.USERS IF EXISTS;
DROP TABLE PUBLIC.USER_ROLES IF EXISTS;
DROP TABLE PUBLIC.ROLES IF EXISTS;
DROP TABLE PUBLIC.PARAMS IF EXISTS;

CREATE MEMORY TABLE PUBLIC.PARAMS(PARAM_KEY VARCHAR(255) NOT NULL PRIMARY KEY,PARAM_VALUE VARCHAR(255),TYPE CHARACTER(1) NOT NULL);
CREATE MEMORY TABLE PUBLIC.ROLES(NAME VARCHAR(15) NOT NULL PRIMARY KEY)
CREATE MEMORY TABLE PUBLIC.USER_ROLES(USER_NAME VARCHAR(15) NOT NULL,ROLE_NAME VARCHAR(15) NOT NULL,PRIMARY KEY(USER_NAME,ROLE_NAME),CONSTRAINT USER_ROLES_ROLES FOREIGN KEY(ROLE_NAME) REFERENCES PUBLIC.ROLES(NAME))
CREATE MEMORY TABLE PUBLIC.USERS(USER_NAME VARCHAR(15) NOT NULL PRIMARY KEY,DIGEST BINARY(16) NOT NULL,MAIL VARCHAR(100) NOT NULL);
CREATE MEMORY TABLE PUBLIC.PERSONNAGE_WORK(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(50),USER_NAME VARCHAR(50),GM_NAME VARCHAR(50),TYPE VARCHAR(50) NOT NULL,PERSONNAGE INTEGER,VALID_PERSONNAGE INTEGER,VALIDATION_DATE TIMESTAMP,LAST_UPDATE_DATE TIMESTAMP,BACKGROUND LONGVARCHAR,CONSTRAINT GM_NAME_USER FOREIGN KEY(GM_NAME) REFERENCES PUBLIC.USERS(USER_NAME),CONSTRAINT USER_NAME_USER FOREIGN KEY(USER_NAME) REFERENCES PUBLIC.USERS(USER_NAME));
CREATE MEMORY TABLE PUBLIC.PERSONNAGE(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,DATA BLOB(16M),LAST_UPDATE_DATE TIMESTAMP);
CREATE MEMORY TABLE PUBLIC.RPG_TABLE(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(255) NOT NULL,TYPE VARCHAR(50) NOT NULL,GM_NAME VARCHAR(255) NOT NULL);
CREATE MEMORY TABLE PUBLIC.TABLE_PERSONNAGE(RPG_TABLE INTEGER NOT NULL,PERSONNAGE INTEGER NOT NULL);
